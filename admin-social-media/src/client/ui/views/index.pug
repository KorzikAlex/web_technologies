extends layout

block variables
    - const activeTitle = 'Управление Пользователями'
    -
        const navbarOptions = {
            actions: [
                {text: 'Сбросить фильтры', class: 'btn-warning d-none', id: 'resetFiltersBtn'},
                {text: 'Добавить пользователя', icon: 'bi bi-plus-circle', modal: '#addUserModal'}
            ],
            filterGroups: [
                {
                    id: 'roleFilter',
                    label: 'Фильтр по роли',
                    itemClass: 'filter-btn',
                    filterType: 'role',
                    items: [
                        {value: '', text: 'Все'},
                        {value: 'admin', text: 'Администратор'},
                        {value: 'user', text: 'Пользователь'}
                    ]
                },
                {
                    id: 'statusFilter',
                    label: 'Фильтр по статусу',
                    itemClass: 'filter-btn',
                    filterType: 'status',
                    items: [
                        {value: '', text: 'Все'},
                        {value: 'active', text: 'Активный'},
                        {value: 'unconfirmed', text: 'Не подтверждён'},
                        {value: 'banned', text: 'Заблокирован'}
                    ]
                }
            ]
        }

block head
    link(rel='stylesheet' href='@scss/style.scss')
    script(src='@ts/index.ts' defer)

block content
    .container-fluid.py-4
        mb-4
            .table-responsive
                table.table.table-bordered.table-hover.rounded
                    thead
                        tr
                            th.text-center ID
                            th.text-center Аватар
                            th.text-center Имя пользователя
                            th.text-center ФИО
                            th.text-center Email
                            th.text-center День рождения
                            th.text-center Роль
                            th.text-center Статус
                            th.text-center Дата регистрации
                            th.text-center Обновлено
                            th.text-center Действия
                    tbody#usersTableBody

    #editUserModal.modal.fade(tabindex='-1' data-bs-backdrop="static")
        .modal-dialog.modal-dialog-centered.modal-dialog-scrollable
            .modal-content
                .modal-header
                    h5.modal-title Редактирование пользователя
                    button.btn-close(type="button" data-bs-dismiss="modal" aria-label="Close")
                .modal-body
                    form#editUserForm
                        .form-group.mb-3
                            label.form-label(for='editAvatar') Аватар (URL)
                            input#editAvatar.form-control(type='url' placeholder='https://example.com/avatar.jpg')
                            small.form-text.text-muted Введите URL изображения для аватара
                        .form-group.mb-3
                            label.form-label(for='editSurname') Фамилия
                            input#editSurname.form-control(type='text' required)
                        .form-group.mb-3
                            label.form-label(for='editName') Имя
                            input#editName.form-control(type='text' required)
                        .form-group.mb-3
                            label.form-label(for='editPatronymic') Отчество
                            input#editPatronymic.form-control(type='text')
                            small.form-text.text-muted Необязательное поле
                        .form-group.mb-3
                            label.form-label(for='editUsername') Имя пользователя
                            input#editUsername.form-control(type='text' required)
                        .form-group.mb-3
                            label.form-label(for='editEmail') Email
                            input#editEmail.form-control(type='email' required)
                        .form-group.mb-3
                            label.form-label(for='editPassword') Пароль
                            input#editPassword.form-control(type='password')
                            small.form-text.text-muted Оставьте пустым, чтобы не менять
                        .form-group.mb-3
                            label.form-label(for='editBirthday') Дата рождения
                            input#editBirthday.form-control(type='date' required)
                        .form-group.mb-3
                            label.form-label(for='editRole') Роль
                            select#editRole.form-control
                                option(value='user') Пользователь
                                option(value='admin') Администратор
                        .form-group.mb-3
                            label.form-label(for='editStatus') Статус
                            select#editStatus.form-control
                                option(value='active') Активный
                                option(value='unconfirmed') Не подтверждён
                                option(value='banned') Заблокирован
                .modal-footer
                    button.btn.btn-secondary(type="button" data-bs-dismiss="modal") Отмена
                    button#saveUserBtn.btn.btn-primary Сохранить

    #addUserModal.modal.fade(tabindex="-1" data-bs-backdrop="static")
        .modal-dialog.modal-dialog-centered.modal-dialog-scrollable
            .modal-content
                .modal-header
                    h5.modal-title Добавление пользователя
                    button.btn-close(type="button" data-bs-dismiss="modal")
                .modal-body
                    form#addUserForm
                        .mb-3
                            label.form-label Аватар (URL)
                            input.form-control#addAvatar(type="url" placeholder="https://example.com/avatar.jpg")
                            small.form-text.text-muted Введите URL изображения для аватара
                        .mb-3
                            label.form-label Фамилия
                            input.form-control#addSurname(type="text" required)
                        .mb-3
                            label.form-label Имя
                            input.form-control#addName(type="text" required)
                        .mb-3
                            label.form-label Отчество
                            input.form-control#addPatronymic(type="text")
                            small.form-text.text-muted Необязательное поле
                        .mb-3
                            label.form-label Email
                            input.form-control#addEmail(type="email" required autocomplete="email")
                        .mb-3
                            label.form-label Никнейм
                            input.form-control#addUsername(type="text" required autocomplete="username")
                        .mb-3
                            label.form-label Пароль
                            input.form-control#addPassword(type="password" required autocomplete="new-password")
                        .mb-3
                            label.form-label Дата рождения
                            input.form-control#addBirthDate(type="date" min="1900-01-01" max=new Date().toISOString().split('T')[0] required)
                        .mb-3
                            label.form-label Роль
                            select.form-select#addRole(required)
                                option(value="user" selected) Пользователь
                                option(value="admin") Администратор
                .modal-footer
                    button.btn.btn-secondary(type="button" data-bs-dismiss="modal") Отмена
                    button#addUserBtn.btn.btn-primary Добавить

    #deleteConfirmModal.modal.fade(tabindex="-1" data-bs-backdrop="static")
        .modal-dialog.modal-dialog-centered
            .modal-content
                .modal-header
                    h5.modal-title Подтверждение удаления
                    button.btn-close(type="button" data-bs-dismiss="modal")
                .modal-body
                    p Вы уверены, что хотите удалить этого пользователя? Это действие необратимо.
                .modal-footer
                    button.btn.btn-secondary(type="button" data-bs-dismiss="modal") Отмена
                    button.btn.btn-danger#confirmDeleteBtn Удалить