# –†–µ–∑—é–º–µ: E2E —Ç–µ—Å—Ç—ã –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —á–∞—Å—Ç–∏ –±–∏—Ä–∂–∏

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ E2E —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —á–∞—Å—Ç–∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–∏—Ä–∂–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Playwright** (headless-–±—Ä–∞—É–∑–µ—Ä).

## üìã –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –¢–µ—Å—Ç—ã

1. **e2e/trading.spec.ts** - –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã —Ç–æ—Ä–≥–æ–≤–ª–∏ (7 —Ç–µ—Å—Ç–æ–≤)
   - –ü–æ–∫—É–ø–∫–∞ N –∞–∫—Ü–∏–π —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –±–∞–ª–∞–Ω—Å–∞
   - –ü—Ä–æ–¥–∞–∂–∞ N –∞–∫—Ü–∏–π —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –±–∞–ª–∞–Ω—Å–∞
   - –†–∞—Å—á–µ—Ç –ø—Ä–∏–±—ã–ª–∏/—É–±—ã—Ç–∫–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã
   - –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ç–æ—Ä–≥–æ–≤–ª–∏
   - –ü–æ–∫—É–ø–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞–∫—Ü–∏–π
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞

2. **e2e/ui.spec.ts** - –¢–µ—Å—Ç—ã UI –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ (20+ —Ç–µ—Å—Ç–æ–≤)
   - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–±–∞–ª–∞–Ω—Å, –∞–∫—Ü–∏–∏, –ø–æ—Ä—Ç—Ñ–µ–ª—å)
   - –î–∏–∞–ª–æ–≥–∏ –ø–æ–∫—É–ø–∫–∏/–ø—Ä–æ–¥–∞–∂–∏
   - –ì—Ä–∞—Ñ–∏–∫–∏ —Å –Ω–∞—á–∞–ª–∞ —Ç–æ—Ä–≥–æ–≤
   - WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
   - –†–∞—Å—á–µ—Ç—ã –ø–æ—Ä—Ç—Ñ–µ–ª—è

3. **e2e/helpers/broker-helpers.ts** - –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
   - loginAsBroker - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
   - getBrokerBalance - –ø–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
   - buyStock / sellStock - —Ç–æ—Ä–≥–æ–≤–ª—è
   - getStockProfitLoss - –ø—Ä–∏–±—ã–ª—å/—É–±—ã—Ç–æ–∫
   - –∏ –¥—Ä—É–≥–∏–µ —É—Ç–∏–ª–∏—Ç—ã

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

4. **playwright.config.ts** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Playwright
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (Chromium)
   - –¢–∞–π–º–∞—É—Ç—ã –∏ –ø–æ–≤—Ç–æ—Ä—ã
   - –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ dev-—Å–µ—Ä–≤–µ—Ä–∞
   - –û—Ç—á–µ—Ç—ã (HTML + console)

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

5. **E2E_TESTS.md** - –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∞–º
6. **TESTING_QUICKSTART.md** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
7. **TESTING_WINDOWS.md** - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è Windows
8. **README.md** - –û–±–Ω–æ–≤–ª–µ–Ω —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–µ—Å—Ç–∞—Ö

### –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞

9. **package.json** - –î–æ–±–∞–≤–ª–µ–Ω—ã:
   - `@playwright/test` –≤ devDependencies
   - npm —Å–∫—Ä–∏–ø—Ç—ã: `test`, `test:ui`, `test:debug`, `test:headed`, `test:report`

10. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** - –î–æ–±–∞–≤–ª–µ–Ω—ã CSS –∫–ª–∞—Å—Å—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
    - `.broker-header` - –∑–∞–≥–æ–ª–æ–≤–æ–∫ –±—Ä–æ–∫–µ—Ä–∞
    - `.broker-name` - –∏–º—è –±—Ä–æ–∫–µ—Ä–∞
    - `.broker-balance` - –±–∞–ª–∞–Ω—Å
    - `.stocks-table` - —Ç–∞–±–ª–∏—Ü–∞ –∞–∫—Ü–∏–π
    - `.portfolio-table` - —Ç–∞–±–ª–∏—Ü–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è
    - `.current-date` - —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞

## üéØ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∑–∞–¥–∞–Ω–∏—é (–ø.7)

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ

> –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —á–∞—Å—Ç–∏ web-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º headless-–±—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ Selenium. –ö–∞–∫ –º–∏–Ω–∏–º—É–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ/–ø—Ä–æ–¥–∞–∂–µ N –∞–∫—Ü–∏–π –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é –¥–∞—Ç—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –±–∞–ª–∞–Ω—Å —Å—Ä–µ–¥—Å—Ç–≤ –±—Ä–æ–∫–µ—Ä–∞ –∏ —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –ø–æ–ª—É—á–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å/—É–±—ã—Ç–æ–∫ –ø–æ –¥–∞–Ω–Ω–æ–π –∞–∫—Ü–∏–∏.

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

1. **Headless-–±—Ä–∞—É–∑–µ—Ä**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Playwright (–±–æ–ª–µ–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Selenium)

2. **–ü–æ–∫—É–ø–∫–∞/–ø—Ä–æ–¥–∞–∂–∞ N –∞–∫—Ü–∏–π**: 
   - –¢–µ—Å—Ç: "–ü–æ–∫—É–ø–∫–∞ 10 –∞–∫—Ü–∏–π AAPL - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞"
   - –¢–µ—Å—Ç: "–ü—Ä–æ–¥–∞–∂–∞ 5 –∞–∫—Ü–∏–π MSFT - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞"
   - –¢–µ—Å—Ç: "–ü–æ–∫—É–ø–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–∞–∑–Ω—ã—Ö –∞–∫—Ü–∏–π –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è"

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞**:
   ```typescript
   const initialBalance = await getBrokerBalance(page);
   await buyStock(page, 'AAPL', 10);
   const newBalance = await getBrokerBalance(page);
   const actualCost = initialBalance - newBalance;
   expect(isWithinRange(actualCost, expectedCost, 0.1)).toBeTruthy();
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–±—ã–ª–∏/—É–±—ã—Ç–∫–∞**:
   ```typescript
   const purchasePrice = await getCurrentStockPrice(page, 'META');
   await buyStock(page, 'META', 100);
   await waitForPriceUpdate(page, 3000); // –ñ–¥–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã
   const newPrice = await getCurrentStockPrice(page, 'META');
   const profitLoss = await getStockProfitLoss(page, 'META');
   const expectedProfitLoss = (newPrice - purchasePrice) * 100;
   expect(isWithinRange(profitLoss, expectedProfitLoss, 1.0)).toBeTruthy();
   ```

5. **–í—Ä–µ–º–µ–Ω–Ω–æ–π —Ñ–∞–∫—Ç–æ—Ä**: 
   - –§—É–Ω–∫—Ü–∏—è `waitForPriceUpdate()` –æ–∂–∏–¥–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω —á–µ—Ä–µ–∑ WebSocket
   - –¢–µ—Å—Ç "–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –ø–æ–∫—É–ø–∫–∞, –æ–∂–∏–¥–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã, –ø—Ä–æ–¥–∞–∂–∞ —Å –ø—Ä–∏–±—ã–ª—å—é"

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±—Ä–∞—É–∑–µ—Ä—ã Playwright
npx playwright install chromium

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
cd ../server && npm run start:dev

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
npm test
```

## üìä –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –≤—ã—Ö–æ–¥
- ‚úÖ –ü–æ–∫—É–ø–∫–∞ –∞–∫—Ü–∏–π (–∏–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞)
- ‚úÖ –ü—Ä–æ–¥–∞–∂–∞ –∞–∫—Ü–∏–π (–∏–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞)
- ‚úÖ –†–∞—Å—á–µ—Ç –ø—Ä–∏–±—ã–ª–∏/—É–±—ã—Ç–∫–∞
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è
- ‚úÖ –ì—Ä–∞—Ñ–∏–∫–∏ —Ü–µ–Ω (—Å –Ω–∞—á–∞–ª–∞ —Ç–æ—Ä–≥–æ–≤)
- ‚úÖ WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- ‚úÖ UI —ç–ª–µ–º–µ–Ω—Ç—ã –∏ –¥–∏–∞–ª–æ–≥–∏
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–í—Å–µ–≥–æ: 27+ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö E2E —Ç–µ—Å—Ç–æ–≤**

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Playwright** 1.49.0 - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **TypeScript** - —Ç–∏–ø–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
- **Chromium** - headless –±—Ä–∞—É–∑–µ—Ä (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å Firefox, WebKit)

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. –¢–µ—Å—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã–π backend-—Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 3000
2. Playwright –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π dev-—Å–µ—Ä–≤–µ—Ä
3. –í—Å–µ —Ç–µ—Å—Ç—ã –≤—ã–≤–æ–¥—è—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—å
4. –ü—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ —Ç–µ—Å—Ç–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞
5. HTML –æ—Ç—á–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [E2E_TESTS.md](E2E_TESTS.md)
- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: [TESTING_QUICKSTART.md](TESTING_QUICKSTART.md)
- –î–ª—è Windows: [TESTING_WINDOWS.md](TESTING_WINDOWS.md)

---

**–ó–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é** ‚úÖ
