extends layout

block head
    - const activeTitle = 'Управление публикациями'
    - const activeLink = 'posts'
    -
        const navbarOptions = {
            actions: [
                { text: 'Добавить публикацию', icon: 'bi bi-plus-circle', modal: '#createPostModal', class: 'btn-light' }
            ],
        filterGroups: [
            {
                id: 'postStatusFilter',
                label: 'Фильтр по статусу',
                itemClass: 'filter-btn',
                filterType: 'status',
                items: [
                    { value: '', text: 'Все' },
                    { value: 'active', text: 'Активные' },
                    { value: 'blocked', text: 'Заблокированные' }
                ]
            }
            ]
        }

block content
    .container-fluid.py-4
        .d-flex.justify-content-between.align-items-center.mb-4
            h1 Управление публикациями

        .table-responsive
            table.table.table-striped.table-hover
                thead
                    tr
                        th ID
                        th Автор
                        th Содержание
                        th Дата создания
                        th Статус
                        th Действия
                tbody#postsTableBody

    //- Модальное окно просмотра
    #viewPostModal.modal.fade(tabindex="-1")
        .modal-dialog.modal-lg
            .modal-content
                .modal-header
                    h5.modal-title Просмотр публикации
                    span#viewPostStatus.badge.ms-2
                    button.btn-close(type="button" data-bs-dismiss="modal")
                .modal-body
                    p
                        strong Автор:
                        span#viewPostAuthor
                    p
                        strong Дата:
                        span#viewPostDate
                    p
                        strong Содержание:
                    p#viewPostContent.border.p-2.rounded(style="white-space: pre-wrap;")
                .modal-footer
                    .ms-auto
                        button#activatePostBtn.btn.btn-success.me-2(type="button") Активировать
                        button#blockPostBtn.btn.btn-warning.me-2(type="button") Заблокировать

    //- Модальное окно создания
    #createPostModal.modal.fade(tabindex="-1")
        .modal-dialog
            .modal-content
                .modal-header
                    h5.modal-title Новая публикация
                    button.btn-close(type="button" data-bs-dismiss="modal")
                .modal-body
                    form#createPostForm
                        .mb-3
                            label.form-label(for="postAuthor") Автор
                            select#postAuthor.form-select(required)
                                option(value="" selected disabled) Выберите автора
                                if users
                                    each user in users
                                        option(value=user.id)= user.fullName
                        .mb-3
                            label.form-label(for="postContent") Содержание
                            textarea#postContent.form-control(rows="5" required)
                .modal-footer
                    button.btn.btn-secondary(type="button" data-bs-dismiss="modal") Отмена
                    button.btn.btn-primary#savePostBtn(type="submit" form="createPostForm") Сохранить

    //- Модальное окно подтверждения удаления
    #deleteConfirmModal.modal.fade(tabindex="-1")
        .modal-dialog
            .modal-content
                .modal-header
                    h5.modal-title Подтверждение удаления
                    button.btn-close(type="button" data-bs-dismiss="modal")
                .modal-body
                    p Вы уверены, что хотите удалить эту публикацию? Это действие необратимо.
                .modal-footer
                    button.btn.btn-secondary(type="button" data-bs-dismiss="modal") Отмена
                    button.btn.btn-danger#confirmDeleteBtn Удалить
